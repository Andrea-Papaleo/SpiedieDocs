<!DOCTYPE html>
 
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Submitting Jobs on Spiedie | Spiedie | Binghamton University</title>
    <link rel="shortcut icon" href="http://localhost:4000/assets/images/favicon.ico" />

    <link rel="stylesheet" href="http://localhost:4000/assets/css/pygments.css" />
    <link rel="stylesheet" href="http://localhost:4000/assets/css/bingfont.css" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
      integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="http://localhost:4000/assets/css/default.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com"> 
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css"> -->
    <!--<script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-11743206-2');
    </script>-->

  </head>
  <body>
    
    <div class="page-container">
      <nav class="navbar">
        <div class="navbar-container">
          <a class="navbar-brand" href="http://localhost:4000"
            ><i class="bu bu-b" style="font-size: 24px"></i>&nbsp;&nbsp; Spiedie
            Docs</a
          >
          <div class="navbar-toc-toggle">
            <button class="navbar-toc-toggle-button">
              <i class="fas fa-bars"></i>
            </button>
          </div>
          <ul class="navbar-menu">
            <li class="navbar-item">
              <a class="navbar-link" href="http://localhost:4000/docs">Docs</a>
            </li>
            <li class="navbar-item">
              <a class="navbar-link" href="http://localhost:4000/singularity"
                >Singularity</a
              >
            </li>
          </ul>
        </div>
        <div class="navbar-toc no-scroll-bar hidden" onclick="openNavbarToc();">
          

    <ol class="toc-l1"><li class="toc-item toc-l1-item">
        <h3 class="toc-l1-title">Introduction to Spiedie</h3>
        
            <ol class="sub-toc toc-l2"><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/introduction.html" >What ia a Cluster</a>
                    
                
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="https://www.binghamton.edu/watson/facilities/computing/high-performance.html" target="_blank">What is Spiedie</a>
                    
                
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="https://www.binghamton.edu/watson/facilities/computing/high-performance.html" target="_blank">How do I get an account</a>
                    
                
                
                    
                
                </li></ol>
        
        </li><li class="toc-item toc-l1-item">
        <h3 class="toc-l1-title">Getting Started</h3>
        
            <ol class="sub-toc toc-l2"><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/connect-to-spiedie.html" >Connecting to Spiedie</a>
                    
                
                
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/home-directory.html" >User Home Directory</a>
                    
                
                
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/data_transfer.html" >Transferring Data to the Cluster</a>
                    
                
                
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/viewing-spiedie-resources.html" >Viewing Spiedie Resources</a>
                    
                
                
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/submitting_jobs.html" >Running Jobs</a>
                    
                
                
                    
                    <ol class="sub-toc toc-l3"><li class="toc-item toc-l3-item">
                            
                                <a class="toc-link toc-l3-link" href="http://localhost:4000/docs/submitting_jobs.html#srun" >Using srun</a>
                            
                        </li><li class="toc-item toc-l3-item">
                            
                                <a class="toc-link toc-l3-link" href="http://localhost:4000/docs/submitting_jobs.html#sbatch" >Using sbatch</a>
                            
                        </li><li class="toc-item toc-l3-item">
                            
                                <a class="toc-link toc-l3-link" href="http://localhost:4000/docs/submitting_jobs.html#resource-alloc" >Customizing Resource Allocation</a>
                            
                        </li></ol>
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/spiedie_modules.html" >Spiedie Modules</a>
                    
                
                
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/compilers.html" >Compiling Code On Spiedie</a>
                    
                
                
                </li></ol>
        
        </li><li class="toc-item toc-l1-item">
        <h3 class="toc-l1-title">Tutorials</h3>
        
            <ol class="sub-toc toc-l2"><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/tutorials/python-environment.html" >Setting up a Python Environment</a>
                    
                
                
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/tutorials/quick_start.html" >Quick Start (Python)</a>
                    
                
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/tutorials/spiedie_gpu_compute.html" >GPU Compute (CUDA)</a>
                    
                
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/tutorials/spiedie_MPI.html" >Multi-node Multi-core Program (MPI)</a>
                    
                
                
                </li></ol>
        
        </li><li class="toc-item toc-l1-item">
        <h3 class="toc-l1-title">Documentation</h3>
        
            <ol class="sub-toc toc-l2"><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/basic_linux_commands.html" >Basic Linux Commands</a>
                    
                
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/basic_slurm_commands.html" >Basic SLURM Commands</a>
                    
                
                
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/spiedie_partitions.html" >Spiedie Partitions and Features</a>
                    
                
                
                    
                
                </li></ol>
        
        </li></ol>


        </div>
      </nav>

      <div class="content-container">
        <aside class="sidenav">
          <div class="sidenav-container">
            <div class="sidenav-search">
              <form class="search-bar">
                <input
                  type="text"
                  class="form-control docs_search"
                  placeholder="Search Docs"
                />
              </form>
            </div>
            <div class="sidenav-menu no-scroll-bar">
              

    <ol class="toc-l1"><li class="toc-item toc-l1-item">
        <h3 class="toc-l1-title">Introduction to Spiedie</h3>
        
            <ol class="sub-toc toc-l2"><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/introduction.html" >What ia a Cluster</a>
                    
                
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="https://www.binghamton.edu/watson/facilities/computing/high-performance.html" target="_blank">What is Spiedie</a>
                    
                
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="https://www.binghamton.edu/watson/facilities/computing/high-performance.html" target="_blank">How do I get an account</a>
                    
                
                
                    
                
                </li></ol>
        
        </li><li class="toc-item toc-l1-item">
        <h3 class="toc-l1-title">Getting Started</h3>
        
            <ol class="sub-toc toc-l2"><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/connect-to-spiedie.html" >Connecting to Spiedie</a>
                    
                
                
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/home-directory.html" >User Home Directory</a>
                    
                
                
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/data_transfer.html" >Transferring Data to the Cluster</a>
                    
                
                
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/viewing-spiedie-resources.html" >Viewing Spiedie Resources</a>
                    
                
                
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/submitting_jobs.html" >Running Jobs</a>
                    
                
                
                    
                    <ol class="sub-toc toc-l3"><li class="toc-item toc-l3-item">
                            
                                <a class="toc-link toc-l3-link" href="http://localhost:4000/docs/submitting_jobs.html#srun" >Using srun</a>
                            
                        </li><li class="toc-item toc-l3-item">
                            
                                <a class="toc-link toc-l3-link" href="http://localhost:4000/docs/submitting_jobs.html#sbatch" >Using sbatch</a>
                            
                        </li><li class="toc-item toc-l3-item">
                            
                                <a class="toc-link toc-l3-link" href="http://localhost:4000/docs/submitting_jobs.html#resource-alloc" >Customizing Resource Allocation</a>
                            
                        </li></ol>
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/spiedie_modules.html" >Spiedie Modules</a>
                    
                
                
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/compilers.html" >Compiling Code On Spiedie</a>
                    
                
                
                </li></ol>
        
        </li><li class="toc-item toc-l1-item">
        <h3 class="toc-l1-title">Tutorials</h3>
        
            <ol class="sub-toc toc-l2"><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/tutorials/python-environment.html" >Setting up a Python Environment</a>
                    
                
                
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/tutorials/quick_start.html" >Quick Start (Python)</a>
                    
                
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/tutorials/spiedie_gpu_compute.html" >GPU Compute (CUDA)</a>
                    
                
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/tutorials/spiedie_MPI.html" >Multi-node Multi-core Program (MPI)</a>
                    
                
                
                </li></ol>
        
        </li><li class="toc-item toc-l1-item">
        <h3 class="toc-l1-title">Documentation</h3>
        
            <ol class="sub-toc toc-l2"><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/basic_linux_commands.html" >Basic Linux Commands</a>
                    
                
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/basic_slurm_commands.html" >Basic SLURM Commands</a>
                    
                
                
                    
                
                </li><li class=" toc-item toc-l2-item">
                    
                    
                        <a class="toc-link toc-l2-link" href="http://localhost:4000/docs/spiedie_partitions.html" >Spiedie Partitions and Features</a>
                    
                
                
                    
                
                </li></ol>
        
        </li></ol>


            </div>
          </div>
        </aside>
        <main>
          <section class="docs no-scroll-bar"><div class="docs-nav">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
        <a id="next-doc" href=/docs/spiedie_modules.html>Spiedie Modules <strong>>></strong></a>
      
      
      
      
      
      
      
      
        <a id="prev-doc" href=/docs/viewing-spiedie-resources.html><strong><<</strong> Viewing Spiedie Resources</a>
      
      
      
      
      
      
      
      
      </div><h1>
               Submitting Jobs on Spiedie 
            </h1>
            
            <article >
              <h3 id="table-of-contents">Table of Contents</h3>

<ol>
  <li><a href="#srun">Using srun</a>
    <ol>
      <li><a href="#srun-program">Running a program</a></li>
      <li><a href="#interactive-session">Interactive Session</a></li>
    </ol>
  </li>
  <li><a href="#sbatch">Using sbatch</a>
    <ol>
      <li><a href="#run-script">Writing a run script</a>
        <ol>
          <li><a href="#directives">Directives</a></li>
          <li><a href="#sbatch-program">Run commands</a></li>
        </ol>
      </li>
      <li><a href="#sbatch-submit">Job Submission</a></li>
    </ol>
  </li>
  <li><a href="#resource-alloc">Customizing resource allocation</a>
    <ol>
      <li><a href="#features">Using Spiedie-specific Directvies or Features</a></li>
      <li><a href="#mem-alloc">Increase memory allocation</a></li>
    </ol>
  </li>
</ol>

<h2 id="-create-and-submit-a-job"><a name="creating-jobs"></a> Create and Submit a Job</h2>

<p>When you want to run a job on the spiedie cluster, there are two main parts that need to be specified. The first of the two is <strong>resource request</strong>. This is when you tell the cluster what your job is going to need to run, i.e. number of nodes/CPUs, expected compute duration, amount of RAM needed, etc.. The next part is <strong>job steps</strong>, which describes the tasks that need to be done, essentially what it is you are truing to run.</p>

<p>Depending on your needs, there are a few ways to go about submitting jobs, if you need to submit a job in real time you can use the <strong>srun</strong> command. Or, if you have a more complex job that you want to submit to the queue and move on to other things, you would use the <strong>squeue</strong> command.</p>

<p>We will first go over submitting jobs via <strong>srun</strong>.</p>

<h3 id="-using-srun"><a name="srun"></a> Using SRUN</h3>

<p>Using <strong>srun</strong> runs the job in the current terminal, blocking other terminal input. Once the job is complete, it relinquishes control of the compute node and allows you to resume input.</p>

<p><strong>srun</strong> also has an option to run interactively, giving you access to the particular node/CPU via the command line. In this mode you can use the command line in the normal way, with any software/tasks executing on the requested node. You will remain “logged in” to the requested compute node/s until the time limit is reached, you manually exit, or an error occurs.</p>

<h4 id="-running-a-simple-program-with-srun"><a name="srun-program"></a> Running a Simple Program with srun</h4>

<p>To queue a quick test program use:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>srun <span class="nt">-n4</span> <span class="nt">-N1</span> &lt;program run <span class="nb">command</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>here we have specified to allocate four tasks(cores) (-n4) and one node (-N1), using the defaults for other parameters.</p>

<p>For instance, if we wanted to run a python file called <em>run.py</em> which outputs “hello!” to the screen, using one node and one core, we would type..</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>watson@spiedie81 ~]<span class="nv">$ </span>srun <span class="nt">-n1</span> <span class="nt">-N1</span> python run.py
hello!
<span class="o">[</span>watson@spiedie81 ~]<span class="err">$</span>
</code></pre></div></div>

<p>After submitting via srun, the cluster allocated the requested resources and ran the python script. While the process is running, control of the terminal is abdicated. The output of that script is then printed to the console and control is then resumed.</p>

<p>Using <strong>srun</strong> in this way is beneficial if you need to quickly run a single script. If you would instead like to run an interactive session you can also do that.</p>

<h4 id="-interactive-session"><a name="interactive-session"></a> Interactive Session</h4>

<p>A common use case for srun is to open an interactive shell session on a cluster. This allows you to run multiple scripts, get the results immediately, and continue using the current node for other tasks like analysis (if needed to be run on cluster).</p>

<p>To start a interactive session run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>srun <span class="nt">-n1</span> <span class="nt">--partition</span><span class="o">=</span>&lt;partition_name&gt; <span class="nt">--pty</span> bash
</code></pre></div></div>

<p>This will allow direct access to a single node in a specific partition defined by <strong><em>parition_name</em></strong> once it is available.</p>

<p>Running the same python script in interactive mode would look something like this…</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>watson@spiedie81 ~]<span class="nv">$ </span>srun <span class="nt">-N1</span> <span class="nt">--partition</span><span class="o">=</span>quick <span class="nt">--pty</span> bash
<span class="o">[</span>watson@compute031 ~]<span class="nv">$ </span>python run.py
hello!
<span class="o">[</span>watson@compute031 ~]<span class="err">$</span>
</code></pre></div></div>

<p>Notice how after the srun command we went from “spiedie81” to “compute031” which is a compute node in the quick partition. Once we’ve been given access to the node, we run the python script as we would on any other terminal, and when it is complete we still have use of the node.</p>

<p>As mentioned earlier, once were done using the node we can exit by typing <strong>exit</strong> or typing <strong>[^d]</strong>. This will bring us back to the head node.</p>

<p><strong><em>NOTE: Its important to exit out of the node when you are done running the processes, otherwise the resource will remain held up until the time limit is reached, preventing others from using it.</em></strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>watson@compute031 ~]<span class="nv">$ </span><span class="nb">exit
exit</span>
<span class="o">[</span>watson@spiedie81 ~]<span class="err">$</span>
</code></pre></div></div>

<p>For more information on partitions, <a href="spiedie_partitions.html">click here.</a></p>

<p>For a list of all srun parameters, <a href="https://slurm.schedmd.com/srun.html" target="_blank">click here.</a></p>

<h3 id="-using-sbatch"><a name="sbatch"></a> Using SBATCH</h3>

<p>The typical way to run a job on a cluster is to write a submission script and run the sbatch command. This allows for greater control and parameter passing. Also sbatch jobs are stored in internal storage awaiting to be executed and the user can log out without affecting the submitted job.</p>

<h4 id="-writing-a-run-script"><a name="run-script"></a> Writing a run script</h4>

<p><em>** Note: Take a look at <a href="https://spiediedocs.binghamton.edu/tutorials/code/example_run_script.sh">example_run_script.sh </a> for a complete run script **</em></p>

<p>The very first line of the script must be the shebang. Such as,</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
</code></pre></div></div>

<h5 id="directives">Directives</h5>

<p>We can include sbatch parameter directives after the shebang to specify the parameters we wish to pass to SLURM. sbatch has the same parameters as srun. For a list of all sbatch parameters <a href="https://slurm.schedmd.com/sbatch.html" target="_blank">click here</a></p>

<p>Some example run script directives would be,</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#SBATCH --job-name=name_of_job</span>
<span class="c">#SBATCH --output=output_file_name.txt</span>
<span class="c">#SBATCH --error=error_file_name.log</span>
<span class="c">#SBATCH --ntasks=1</span>
</code></pre></div></div>

<p>The above directives specify the job name, standard out, standard error file names and the number of tasks. If output and error are not specified, the output and error will be written to slurm_job_name.out by default.</p>

<h5 id="shell-commands">Shell Commands</h5>

<p>Finally, we can simply append the shell command to instruct SLURM to the desired program.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#SBATCH --job-name=name_of_job</span>
<span class="c">#SBATCH --output=output_file_name.txt</span>
<span class="c">#SBATCH --error=error_file_name.log</span>
<span class="c">#SBATCH --ntasks=1</span>

program_run_command program
</code></pre></div></div>

<p>Here <em>program_run_command</em> is whatever you would use to run you program normally. For example, to run a python script <em>program_run_command</em> would instead be <em>python</em>, as shown below.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#SBATCH --job-name=name_of_job</span>
<span class="c">#SBATCH --output=output_file_name.txt</span>
<span class="c">#SBATCH --error=error_file_name.log</span>
<span class="c">#SBATCH --ntasks=1</span>

python run.py
</code></pre></div></div>

<p>Now that a run script has been created, you can submit it using the <strong>sbatch</strong> command.</p>

<h4 id="-submitting-the-run-script"><a name="sbatch-submission"></a> Submitting the run script</h4>

<p>To use a run script to submit a job use:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sbatch <span class="nt">--partition</span><span class="o">=</span>partition_name run_script.sh
</code></pre></div></div>

<p>Once you run the <strong>sbatch</strong> command, You will see your submission on the queue by using <strong>squeue</strong>, along with the requirements needed to be met in order to begin running.</p>

<h2 id="-customizing-resource-allocation"><a name="resource_alloc"></a> Customizing resource allocation</h2>

<p>One of the important advantages of using Spiedie is the flexibility of hardware resources available to the user. You can tailor your resource request to suit the needs of your program.</p>

<p>Proper resource allocation also ensures your program runs as fast and efficiently as possible and does not halt unexpectedly due to hardware resource shortages such as memory. It is also best practice to allocate the right amount of resources for SLURM to work as efficient as possible for the entire cluster.</p>

<h3 id="-using-spiedie-specific-directives-or-features"><a name="features"></a> Using Spiedie-specific Directives or Features</h3>

<p>One way to make sure your programs run properly is to run it on the correct partition, as stated above.</p>

<p>You can also use the feature flag to help properly allocate resources. <a href="spiedie_partitions.html#features">For more information on partitions, click here.</a></p>

<p>To make use of a feature, such as the KNL nodes use:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>srun <span class="nt">-N1</span> <span class="nt">-n40</span> <span class="nt">-C</span><span class="o">=</span><span class="s2">"knl"</span> ./program_to_run
</code></pre></div></div>

<p>The above command requests 40 cores for the program to run, which is only available on the Knights Landing Nodes. The -C (constraint) flag ensures that the program is only run on KNL nodes.</p>

<h3 id="-increase-memory-allocation"><a name="memory_alloc"></a> Increase memory allocation</h3>

<p>In order to increase the default memory allocation (2GB), you can use the –mem flag for srun and sbatch to specify the memory needed per node.</p>

<p>For example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>srun <span class="nt">-n1</span> <span class="nt">--mem</span><span class="o">=</span>4G ./program_to_run
</code></pre></div></div>

<p>The above job requests for 4 GB of memory for the default one node.</p>

<p>You can also request memory per core using the –mem-per-cpu flag.</p>

<p>Hopefully this page has helped you understand how to submit jobs to spiedie. You may have noticed that throughout this part of the documentation we have been submitting scripts which run the python program. The reason for that is that python(v2.7) is installed by default on the cluster, with no extra steps for running a python script. In the next section we will discuss spiedie modules, what they are, and how to install and use them in your scripts.</p>


            </article><div class="docs-nav">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
        <a id="next-doc" href=/docs/spiedie_modules.html>Spiedie Modules <strong>>></strong></a>
      
      
      
      
      
      
      
      
        <a id="prev-doc" href=/docs/viewing-spiedie-resources.html><strong><<</strong> Viewing Spiedie Resources</a>
      
      
      
      
      
      
      
      
      </div></section>
        </main>
        <aside class="content-detail">
          <!-- Begin Tags -->
          <div class="content-tags-container">
    <h3 class="content-tags-title">Tags</h3>
    <ul class="content-tags-list">
    
        <li class="content-tag">
        <a class="content-tag-link" href="http://localhost:4000/tags#srun">
            SRUN
        </a>
        </li>
    
        <li class="content-tag">
        <a class="content-tag-link" href="http://localhost:4000/tags#sbatch">
            SBATCH
        </a>
        </li>
    
        <li class="content-tag">
        <a class="content-tag-link" href="http://localhost:4000/tags#job-submission">
            Job Submission
        </a>
        </li>
    
        <li class="content-tag">
        <a class="content-tag-link" href="http://localhost:4000/tags#interactive-session">
            interactive session
        </a>
        </li>
    
        <li class="content-tag">
        <a class="content-tag-link" href="http://localhost:4000/tags#memory-allocation">
            memory allocation
        </a>
        </li>
    
        <li class="content-tag">
        <a class="content-tag-link" href="http://localhost:4000/tags#partitions">
            partitions
        </a>
        </li>
    
    </ul>
</div>
          <!-- End Tags -->
        </aside>  
      </div>
      <footer class="row">
        <script src="http://localhost:4000/assets/js/sidenavToggle.js"></script>
        <div class="col-sm-12">
          <!-- Footer -->
        </div>
      </footer>
    </div>
    <script
      src="https://code.jquery.com/jquery-2.2.4.min.js"
      integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script src="http://localhost:4000/assets/js/jquery.autocomplete.js"></script>
    <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script> -->
    <script>
      var docs_arr = [
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          {
            "url":`/tutorials/`,
            "value": `Tutorials` 
          },
        
      
        
      
        
      
        
      
        
          {
            "url":`/tutorials/python-environment.html`,
            "value": `Setting Up a Python Environment` 
          },
        
      
        
          {
            "url":`/tutorials/quick_start.html`,
            "value": `Quick Start Tutorial - Python` 
          },
        
      
        
      
        
      
        
          {
            "url":`/tutorials/spiedie_MPI.html`,
            "value": `MPI on Spiedie (advanced)` 
          },
        
      
        
          {
            "url":`/tutorials/spiedie_conda.html`,
            "value": `Conda on Spiedie (intermediate)` 
          },
        
      
        
      
        
          {
            "url":`/tutorials/spiedie_gpu_compute.html`,
            "value": `GPU on Spiedie (advanced)` 
          },
        
      
        
      
        
      
        
          {
            "url":`/tutorials/spiedie_multiprocessing.html`,
            "value": `Python Multi-Core Tutorial` 
          },
        
      
        
          {
            "url":`/tutorials/spiedie_openmp_multi_core.html`,
            "value": `OpenMP on Spiedie (advanced)` 
          },
        
      
        
      
        
          {
            "url":`/tutorials/spiedie_singularity.html`,
            "value": `Singularity Containers on Spiedie (advanced)` 
          },
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      
        {
          "url":`/tags#blas`,
          "value":`BLAS`
        },
      
        {
          "url":`/tags#clang`,
          "value":`CLANG`
        },
      
        {
          "url":`/tags#cmake`,
          "value":`CMAKE`
        },
      
        {
          "url":`/tags#cublas`,
          "value":`CUBLAS`
        },
      
        {
          "url":`/tags#cuda`,
          "value":`CUDA`
        },
      
        {
          "url":`/tags#check-job-status`,
          "value":`Check Job Status`
        },
      
        {
          "url":`/tags#cloud-storage`,
          "value":`Cloud Storage`
        },
      
        {
          "url":`/tags#conda`,
          "value":`Conda`
        },
      
        {
          "url":`/tags#configuration`,
          "value":`Configuration`
        },
      
        {
          "url":`/tags#containers`,
          "value":`Containers`
        },
      
        {
          "url":`/tags#create-images`,
          "value":`Create Images`
        },
      
        {
          "url":`/tags#faq`,
          "value":`FAQ`
        },
      
        {
          "url":`/tags#file-transfer`,
          "value":`File Transfer`
        },
      
        {
          "url":`/tags#forwarding`,
          "value":`Forwarding`
        },
      
        {
          "url":`/tags#gcc`,
          "value":`GCC`
        },
      
        {
          "url":`/tags#gemm`,
          "value":`GEMM`
        },
      
        {
          "url":`/tags#gpu`,
          "value":`GPU`
        },
      
        {
          "url":`/tags#gpucompute`,
          "value":`GPUCompute`
        },
      
        {
          "url":`/tags#gui`,
          "value":`GUI`
        },
      
        {
          "url":`/tags#icc`,
          "value":`ICC`
        },
      
        {
          "url":`/tags#intel-compilers`,
          "value":`Intel Compilers`
        },
      
        {
          "url":`/tags#interactive-sessions`,
          "value":`Interactive Sessions`
        },
      
        {
          "url":`/tags#job-submission`,
          "value":`Job Submission`
        },
      
        {
          "url":`/tags#linux`,
          "value":`Linux`
        },
      
        {
          "url":`/tags#login`,
          "value":`Login`
        },
      
        {
          "url":`/tags#matlab`,
          "value":`MATLAB`
        },
      
        {
          "url":`/tags#mvapich2`,
          "value":`MVAPICH2`
        },
      
        {
          "url":`/tags#mac`,
          "value":`Mac`
        },
      
        {
          "url":`/tags#modules`,
          "value":`Modules`
        },
      
        {
          "url":`/tags#multiprocessing`,
          "value":`Multiprocessing`
        },
      
        {
          "url":`/tags#new-user`,
          "value":`New_User`
        },
      
        {
          "url":`/tags#python`,
          "value":`Python`
        },
      
        {
          "url":`/tags#python-program`,
          "value":`Python Program`
        },
      
        {
          "url":`/tags#remote-access`,
          "value":`Remote Access`
        },
      
        {
          "url":`/tags#remote-build`,
          "value":`Remote Build`
        },
      
        {
          "url":`/tags#run-program`,
          "value":`Run Program`
        },
      
        {
          "url":`/tags#sbatch`,
          "value":`SBATCH`
        },
      
        {
          "url":`/tags#slurm`,
          "value":`SLURM`
        },
      
        {
          "url":`/tags#srun`,
          "value":`SRUN`
        },
      
        {
          "url":`/tags#setup`,
          "value":`Setup`
        },
      
        {
          "url":`/tags#singularity`,
          "value":`Singularity`
        },
      
        {
          "url":`/tags#submit-job`,
          "value":`Submit Job`
        },
      
        {
          "url":`/tags#submit-job`,
          "value":`Submit job`
        },
      
        {
          "url":`/tags#sylabs-cloud-services`,
          "value":`Sylabs Cloud Services`
        },
      
        {
          "url":`/tags#tensorflow`,
          "value":`Tensorflow`
        },
      
        {
          "url":`/tags#tensorflow-gpu`,
          "value":`Tensorflow-GPU`
        },
      
        {
          "url":`/tags#tutorial`,
          "value":`Tutorial`
        },
      
        {
          "url":`/tags#virtualenv`,
          "value":`VirtualEnv`
        },
      
        {
          "url":`/tags#windows`,
          "value":`Windows`
        },
      
        {
          "url":`/tags#workflow`,
          "value":`Workflow`
        },
      
        {
          "url":`/tags#x11`,
          "value":`X11`
        },
      
        {
          "url":`/tags#containers`,
          "value":`containers`
        },
      
        {
          "url":`/tags#create-image`,
          "value":`create image`
        },
      
        {
          "url":`/tags#custom-container`,
          "value":`custom container`
        },
      
        {
          "url":`/tags#docs`,
          "value":`docs`
        },
      
        {
          "url":`/tags#features`,
          "value":`features`
        },
      
        {
          "url":`/tags#interactive-session`,
          "value":`interactive session`
        },
      
        {
          "url":`/tags#memory-allocation`,
          "value":`memory allocation`
        },
      
        {
          "url":`/tags#memory-management`,
          "value":`memory management`
        },
      
        {
          "url":`/tags#modules`,
          "value":`modules`
        },
      
        {
          "url":`/tags#mpi`,
          "value":`mpi`
        },
      
        {
          "url":`/tags#multicore`,
          "value":`multicore`
        },
      
        {
          "url":`/tags#multinode`,
          "value":`multinode`
        },
      
        {
          "url":`/tags#partitions`,
          "value":`partitions`
        },
      
        {
          "url":`/tags#sacct`,
          "value":`sacct`
        },
      
        {
          "url":`/tags#sbatch`,
          "value":`sbatch`
        },
      
        {
          "url":`/tags#sinfo`,
          "value":`sinfo`
        },
      
        {
          "url":`/tags#singularity`,
          "value":`singularity`
        },
      
        {
          "url":`/tags#singularity-definition-files`,
          "value":`singularity definition files`
        },
      
        {
          "url":`/tags#singularity-exec`,
          "value":`singularity exec`
        },
      
        {
          "url":`/tags#singularity-recipes`,
          "value":`singularity recipes`
        },
      
        {
          "url":`/tags#singularity-run`,
          "value":`singularity run`
        },
      
        {
          "url":`/tags#srun`,
          "value":`srun`
        },
      
        {
          "url":`/tags#tutorial`,
          "value":`tutorial`
        },
      
        {
          "url":`/tags#tutorials`,
          "value":`tutorials`
        },
      
        {
          "url":`/tags#virtual-environment`,
          "value":`virtual environment`
        },
      
        {
          "url":`/tags#x2go`,
          "value":`x2go`
        },
      
      ];
      $('.docs_search').autocomplete({
          lookup: docs_arr,
          onSelect: function (suggestion) {
              window.location = "http://localhost:4000"+suggestion.url
          }
      });
    </script>
  </body>
</html>
